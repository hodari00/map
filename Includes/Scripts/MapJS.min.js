var InitializeMap=function(e,t){this.Map,this.PinIcon=CustomURL("Includes/Images/pinsmall2.png"),this.Hub={lat:56.307953,lng:10.626566},this.HubName="Aarhus",this.HubPinIcon=CustomURL("Includes/Images/pin2.png"),this.HubAirline="Ã…rhus Charter",this.HubButton=[{MarkerButtonName:"Charter",URL:"http://www.aarhuscharter.dk"}],this.HubFilters={Routes:{Direct:!0,Charter:!0},Seasons:{Summer:!0,Winter:!0}},this.MyOptions={zoom:4,center:this.Hub,mapTypeControl:!1},this.MyStyles=[{featureType:"water",elementType:"geometry",stylers:[{color:"#528cbf"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{hue:"#ebebeb"},{gamma:1.4},{saturation:82},{lightness:96}]},{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#ffffff"}]}],this.LocationsList,this.InfoBoxes=new InfoBox(this.InfoBoxOptions),this.PopupCSS="background-color: #ffffff; width: 330px;",this.BoxText=t.createElement("div"),this.ButtonsRow=t.createElement("td"),this.MarkerFilterType=[],this.MarkerFilterValue=[],this.Markers=[],this.FlightPaths=[],this.Filters={Routes:{Direct:!0,Charter:!0},Seasons:{Summer:!0,Winter:!0}},this.MapLabelFont="Titillium Web",this.MapLabelFontSize=14,this.MapLabelStrokeWeight=0,this.MapLabelColor="#1b355d",this.MapLabels=[];var a=this;this.Init=function(){a.Map=new google.maps.Map(t.getElementById("Map"),a.MyOptions),a.Map.set("styles",a.MyStyles),a.CreateHubMarker(),a.GetLocations()},google.maps.event.addDomListener(e,"resize",function(){google.maps.event.trigger(a.Map,"resize"),a.Map.setCenter(a.Hub)}),a.GetLocations=function(){$.getJSON(CustomURL("Includes/JsonCoords.json"),function(e){a.LocationsList=e;var t={Mandag:1,Tirsdag:2,Onsdag:4,Torsdag:8,Fredag:16,"L&oslash;rdag":32,"S&oslash;ndag":64};for(I in a.LocationsList){var s=[];if(null!=a.LocationsList[I].Weekdays){for(A in t)(a.LocationsList[I].Weekdays&t[A])>0&&s.push(" "+A);a.LocationsList[I].Weekdays=s}}}).complete(function(){a.DrawFlightPaths(),a.CreateAllMarkers()})},a.ResetFilters=function(){this.Filters={Routes:{Direct:!0,Charter:!0},Seasons:{Summer:!0,Winter:!0},Planes:{Airbus:!0,Boeing:!0}},a.FilterMarkers()},a.SetFilter=function(e,t,s){for(F in a.Filters[e])F==t&&(a.Filters[e][F]=s);a.FilterMarkers()},a.FilterMarkers=function(){for(var e=1;e<a.Markers.length;e++)e:for(K in Object.keys(a.Markers[e].filters)){var t=a.Markers[e].filters[Object.keys(a.Markers[e].filters)[K]],s=a.Filters[Object.keys(a.Filters)[K]];for(L in Object.keys(s)){if(s[Object.keys(s)[L]]&&t[Object.keys(s)[L]]){K==Object.keys(a.Markers[e].filters).length-1&&(a.Markers[e].setMap(a.Map),a.MapLabels[e].setMap(a.Map),a.FlightPaths[e-1].setMap(a.Map));break}if(L==Object.keys(s).length-1){a.Markers[e].setMap(null),a.MapLabels[e].setMap(null),a.FlightPaths[e-1].setMap(null);break e}}}},a.AddMarker=function(e,t,s,o,i,n,r){var l=new google.maps.Marker({position:e,map:a.Map,title:t,animation:google.maps.Animation.DROP,icon:{url:s,anchor:new google.maps.Point(8,8)},filters:r}),p="center",c=new MapLabel({text:t.toUpperCase(),position:new google.maps.LatLng(e),map:a.Map,fontFamily:a.MapLabelFont,fontSize:a.MapLabelFontSize,fontColor:a.MapLabelColor,align:p,orientation:p,strokeWeight:a.MapLabelStrokeWeight});a.Markers.push(l),a.MapLabels.push(c),a.FilterMarkers(),google.maps.event.addListener(l,"click",function(){a.CreateInfoBox(t,l,o,i,n)}),google.maps.event.addListener(a.Map,"click",function(){$(".infoBox").is(":visible")&&a.InfoBoxes.setMap(null)})},a.CreateHubMarker=function(){a.AddMarker(a.Hub,a.HubName,a.HubPinIcon,a.HubAirline,null,a.HubButton,a.HubFilters)},a.CreateAllMarkers=function(){for(var e=0;e<a.LocationsList.length;e++)a.AddMarker(a.LocationsList[e].position,a.LocationsList[e].title,a.PinIcon,a.LocationsList[e].Airline,a.LocationsList[e].Weekdays,a.LocationsList[e].Buttons,a.LocationsList[e].Filters)},a.DrawFlightPaths=function(){for(var e=0;e<a.LocationsList.length;e++)FlightPath=[a.Hub,a.LocationsList[e].position],FlightPathLine=new google.maps.Polyline({path:FlightPath,geodesic:!1,strokeColor:"#203e64",strokeOpacity:1,strokeWeight:2}),a.FlightPaths.push(FlightPathLine)},a.CreateInfoBox=function(e,t,s,o,i){var n="";if($(i).each(function(e){n+='<a class="Button" href="'+i[e].URL+'" target="_blank">'+i[e].MarkerButtonName+"</a>"}),null!=o)var r='<tr><td class="BorderBottom"><span style="color: #a8a8a8">Weekdays:</span><br />'+o+"</td></tr>";else var r="";a.BoxText.innerHTML='<div class="Headline">'+e+'</div><table style="width: 100%" class="InfoboxTable"><tr><td class="BorderBottom"><span style="color: #a8a8a8">Udbyder:</span><br />'+s+"</td></tr>"+r+'<tr class="ButtonsRow"><td>'+n+"</td></tr></table>",a.BoxText.style.cssText=a.PopupCSS,InfoBoxOptions={content:a.BoxText,disableAutoPan:!1,maxWidth:0,pixelOffset:new google.maps.Size(-140,0),zIndex:null,boxStyle:{padding:"0px 0px 0px 0px",width:"252px",height:"40px"},closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1},a.InfoBoxes.setContent(a.BoxText),a.InfoBoxes.open(a.Map,t)}},SampleMap;google.maps.event.addDomListener(window,"load",function(){SampleMap=new InitializeMap(window,document),SampleMap.Init()});