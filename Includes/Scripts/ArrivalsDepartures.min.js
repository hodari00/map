function imgError(t){return t.onerror="",t.src=" ",!0}$(window).on("load",function(){var t=window.location.search;""==t&&(t=window.location.href),(t.indexOf("tab2=true")>=0||t.indexOf("ankomster")>=0)&&$(".FlightsHeader#arr").click()}),$(".ArrivalsDepartures .FlightsHeader").on("click",function(){var t=$(this).attr("data-show");$(".ArrivalsDepartures table").hide(),$(".FlightsHeader").removeClass("Selected"),$(".ArrivalsDepartures table"+t).show(),$(".FlightsHeader"+t).addClass("Selected")}),$(".FlightsHeader#dep").on("click",function(){TableAjax("afgange-ankomster/getdep","#dep")}),$(window).on("load",function(){TableAjax("afgange-ankomster/getdep","#dep")}),$(".FlightsHeader#arr").on("click",function(){TableAjax("afgange-ankomster/getarr","#arr")});var TableAjax=function(t,a){$.ajax({type:"POST",dataType:"json",url:CustomURL(t),success:function(t){PopulateTable(t.Response.Body.Fly,a)},error:function(){console.log("Failed")}})},PopulateTable=function(t,a){function e(t,a){setInterval(function(){t.is(":visible")?(t.hide(),a.show()):(t.show(),a.hide()),d()},2e3)}function d(){$(r).find("tbody > tr:visible:even").addClass("EvenRow").removeClass("OddRow"),$(r).find("tbody > tr:visible:odd").removeClass("EvenRow").addClass("OddRow")}var r="table"+a,n="<tr>"+$(r).find("tr").html()+"</tr>";for(I in t){var i=t[I].fly_nr.substring(0,2);if("#arr"==a)var s=t[I].fra;else var s=t[I].til;if(""!=t[I].forventet&&t[I].forventet!=t[I].planlagt)var o=" <span>("+t[I].forventet+")</span>";else var o="";if(""!=t[I]["bemærkning"])var l=t[I]["bemærkning"];else var l="-";var v=t[I].dato.substring(8,10)+"-"+t[I].dato.substring(5,7)+"-"+t[I].dato.substring(0,4),f=CustomURL("Includes/Images/SupplierLogos/"+i+".png");n+='<tr class="VisibleRow"><td></td><td class="Date" data-value='+v+">"+v+'</td><td><img src="'+f+'" onerror="imgError(this);" /></td><td>'+t[I].fly_nr+'</td><td class="Location" data-value='+s+">"+s+'</td><td class="Landed" data-value='+t[I].planlagt+">"+t[I].planlagt+o+"</td><td>"+l+"</td><td></td></tr>"}$(r).empty().append(n);var u=r+" tr";$(u).each(function(){if($(this).find(".Date").length>0&&$(this).find(".Date").data("value")==$(this).prev().find(".Date").data("value")&&$(this).find(".Location").data("value")==$(this).prev().find(".Location").data("value")&&$(this).find(".Landed").data("value")==$(this).prev().find(".Landed").data("value")){$(this).hide();var t=$(this),a=$(this).prev();e(t,a)}DateHTML='<tr class="DateRow"><td></td><td></td><td></td><td>'+$(this).find(".Date").data("value")+"</td><td></td><td></td><td></td><td></td></tr>",$(this).find(".Date").data("value")!=$(this).prev().find(".Date").data("value")&&$(this).before(DateHTML)}),d()};